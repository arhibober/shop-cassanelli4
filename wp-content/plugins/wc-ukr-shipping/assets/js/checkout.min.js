!function(e){var n={};function i(s){if(n[s])return n[s].exports;var t=n[s]={i:s,l:!1,exports:{}};return e[s].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=e,i.c=n,i.d=function(e,n,s){i.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,n){if(1&n&&(e=i(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var t in e)i.d(s,t,function(n){return e[n]}.bind(null,t));return s},i.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(n,"a",n),n},i.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},i.p="",i(i.s=0)}([function(e,n,i){"use strict";i.r(n);let s=function(e,n,i){e&&(this.$=i,this.$el=i(e),this.params=n||{},this._initSelect2(),this._initEvents())};s.prototype._initSelect2=function(){let e=this.$,n=this,i={sorter:function(n){return n.sort((function(i,s){let t=e(".select2-search__field");if(0===t.length||""===t.val())return n;let l=i.text.toLowerCase(),o=s.text.toLowerCase(),c=t.val().toLowerCase();return l.indexOf(c)<o.indexOf(c)?-1:l.indexOf(c)>o.indexOf(c)?1:0})),n}};this.params.i10n&&this.params.i10n.noResult&&(i.language={noResults:function(){return n.params.i10n.noResult}}),"function"==typeof e.fn.select2&&this.$el.select2(i)},s.prototype._initEvents=function(){let e=this,n=this.$;e.$el.on("change",(function(){if(!e.params.mirror)return;let i=n("#"+e.params.mirror);i.length&&i.val(e.$el.val()).trigger("change.select2"),e.params.ajaxAction&&e._loadAjax()}))},s.prototype._loadAjax=function(){let e=this;this.$;e.params.events&&e.params.events.beforeRequest&&e.params.events.beforeRequest(),window.WCUkrShippingRouter.post(e.params.ajaxAction,e.params.ajaxData(),(function(n){e.params.events&&e.params.events.response&&(e.params.events.response(),e._processAjaxResponse(n))}))},s.prototype._processAjaxResponse=function(e){if(e.success){if("function"==typeof this.params.responseMapper){let n=this.params.responseMapper(e.data);this._updateHtml(n)}}else console.error(e.data)},s.prototype._updateHtml=function(e){let n=this.$,i="";i+='<option value="">'+this.params.targetPlaceholder+"</option>";for(let n=0;n<e.length;n++)i+='<option value="'+e[n].value+'">'+e[n].name+"</option>";this.params.ajaxTarget.forEach((function(e){n("#"+e).length&&n("#"+e).html(i)}))},function(e){let n,i=e(".wc-ukr-shipping-np-fields"),t=document.getElementById("ship-to-different-address-checkbox"),l=function(){i.addClass("wcus-state-loading")},o=function(){i.removeClass("wcus-state-loading")},c=function(){let n=e(".shipping_method").length>1?e(".shipping_method:checked").val():e(".shipping_method").val();return n&&n.match(/^nova_poshta_shipping.+/i)};t&&t.addEventListener("click",(function(){c()&&(this.checked?(e("#wcus_np_shipping_fields").css("display","block"),e("#wcus_np_billing_fields").css("display","none")):(e("#wcus_np_shipping_fields").css("display","none"),e("#wcus_np_billing_fields").css("display","block")))}));let p=function(){let n=e(".j-wcus-np-custom-address");n.length&&n.on("click",(function(){let n=document.getElementById(this.dataset.relationSelect);n&&(n.checked=this.checked),this.checked?(e(".j-wcus-warehouse-block").slideUp(400),e(".j-wcus-np-custom-address-block").slideDown(400)):(e(".j-wcus-warehouse-block").slideDown(400),e(".j-wcus-np-custom-address-block").slideUp(400))}))};e((function(){e(".wc-ukr-shipping-np-fields").css("display","none"),e(document.body).bind("update_checkout",(function(e,n){l()})),e(document.body).bind("updated_checkout",(function(i,s){n=e("#billing_country").length?e("#billing_country").val():"UA","UA"===n&&c()?t&&t.checked?e("#wcus_np_shipping_fields").css("display","block"):e("#wcus_np_billing_fields").css("display","block"):e(".wc-ukr-shipping-np-fields").css("display","none"),c()&&"true"===wc_ukr_shipping_globals.disableDefaultBillingFields?(e("#billing_address_1_field").css("display","none"),e("#billing_address_2_field").css("display","none"),e("#billing_city_field").css("display","none"),e("#billing_state_field").css("display","none"),e("#billing_postcode_field").css("display","none"),e("#shipping_address_1_field").css("display","none"),e("#shipping_address_2_field").css("display","none"),e("#shipping_city_field").css("display","none"),e("#shipping_state_field").css("display","none"),e("#shipping_postcode_field").css("display","none")):(e("#billing_address_1_field").css("display","block"),e("#billing_address_2_field").css("display","block"),e("#billing_city_field").css("display","block"),e("#billing_state_field").css("display","block"),e("#billing_postcode_field").css("display","block"),e("#shipping_address_1_field").css("display","block"),e("#shipping_address_2_field").css("display","block"),e("#shipping_city_field").css("display","block"),e("#shipping_state_field").css("display","block"),e("#shipping_postcode_field").css("display","block")),o()}));let i=function(n){let i="#wcus_np_"+n+"_area";return{mirror:"billing"===n?"wcus_np_shipping_area":"wcus_np_billing_area",ajaxAction:"wc_ukr_shipping_get_cities",ajaxData:function(){return{ref:e(i).val(),nonce:wc_ukr_shipping_globals.nonce}},ajaxTarget:["wcus_np_billing_city","wcus_np_shipping_city"],targetPlaceholder:wc_ukr_shipping_globals.i10n.placeholder_city,responseMapper:function(e){let n=[];for(let i=0;i<e.length;i++)n.push({value:e[i].ref,name:"ru"===wc_ukr_shipping_globals.lang?e[i].description_ru:e[i].description});return n},events:{beforeRequest:function(){l()},response:function(){o()}},i10n:{noResult:wc_ukr_shipping_globals.i10n.not_found}}},a=function(n){let i="#wcus_np_"+n+"_city";return{mirror:"billing"===n?"wcus_np_shipping_city":"wcus_np_billing_city",ajaxAction:"wc_ukr_shipping_get_warehouses",ajaxData:function(){return{ref:e(i).val(),nonce:wc_ukr_shipping_globals.nonce}},ajaxTarget:["wcus_np_billing_warehouse","wcus_np_shipping_warehouse"],targetPlaceholder:wc_ukr_shipping_globals.i10n.placeholder_warehouse,responseMapper:function(e){let n=[];for(let i=0;i<e.length;i++)n.push({value:e[i].ref,name:"ru"===wc_ukr_shipping_globals.lang?e[i].description_ru:e[i].description});return n},events:{beforeRequest:function(){l()},response:function(){o()}},i10n:{noResult:wc_ukr_shipping_globals.i10n.not_found}}},r=function(e){return{mirror:"billing"===e?"wcus_np_shipping_warehouse":"wcus_np_billing_warehouse",i10n:{noResult:wc_ukr_shipping_globals.i10n.not_found}}};new s(document.getElementById("wcus_np_billing_area"),i("billing"),e),new s(document.getElementById("wcus_np_shipping_area"),i("shipping"),e),new s(document.getElementById("wcus_np_billing_city"),a("billing"),e),new s(document.getElementById("wcus_np_shipping_city"),a("shipping"),e),new s(document.getElementById("wcus_np_billing_warehouse"),r("billing"),e),new s(document.getElementById("wcus_np_shipping_warehouse"),r("shipping"),e);p()}))}(jQuery)}]);